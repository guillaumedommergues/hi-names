<!DOCTYPE html>
<html>
    <head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Hawai ªi Names</title>

    <!-- Bootstrap -->
    <link href="../static/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="../static/css/editMap.css" rel="stylesheet">
    <!-- enables us to access URL as $SCRIPT_ROOT -->
    <script type=text/javascript>$SCRIPT_ROOT = {{ request.script_root|tojson|safe }};</script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!--Roboto Font-->
    <link href="https://fonts.googleapis.com/css?family=Roboto:300" rel="stylesheet">
    <!--Roboto Font-->

  <!-- ****** faviconit.com favicons ****** -->
  <link rel="shortcut icon" href="../static/favicon/favicon.ico">
  <link rel="icon" sizes="16x16 32x32 64x64" href="../static/favicon/favicon.ico">
  <link rel="icon" type="image/png" sizes="196x196" href="../static/favicon/favicon-192.png">
  <link rel="icon" type="image/png" sizes="160x160" href="../static/favicon/favicon-160.png">
  <link rel="icon" type="image/png" sizes="96x96" href="../static/favicon/favicon-96.png">
  <link rel="icon" type="image/png" sizes="64x64" href="../static/favicon/favicon-64.png">
  <link rel="icon" type="image/png" sizes="32x32" href="../static/favicon/favicon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="../static/favicon/favicon-16.png">
  <link rel="apple-touch-icon" href="../static/favicon/favicon-57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="../static/favicon/favicon-114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="../static/favicon/favicon-72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="../static/favicon/favicon-144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="../static/favicon/favicon-60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="../static/favicon/favicon-120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="../static/favicon/favicon-76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="../static/favicon/favicon-152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="../static/favicon/favicon-180.png">
  <meta name="msapplication-TileColor" content="#FFFFFF">
  <meta name="msapplication-TileImage" content="../static/favicon/favicon-144.png">
  <meta name="msapplication-config" content="../static/favicon/browserconfig.xml">
  <!-- ****** faviconit.com favicons ****** -->

        <title>Project Olelo</title>
        
        
        <!-- 
            You need to include this script tag on any page that has a Google Map.

            The following script tag will work when opening this example locally on your computer.
            But if you use this on a localhost server or a live website you will need to include an API key. 
            Sign up for one here (it's free for small usage): 
                https://developers.google.com/maps/documentation/javascript/tutorial#api_key-->
                
        <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js"></script><!--

            After you sign up, use the following script tag with YOUR_GOOGLE_API_KEY replaced with your actual key.
               <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=yourAPIKEY"></script>-->


        <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

        <script type="text/javascript">
// beginning of the jQuery funnction
$(function() {
// beginning of the jQuery funnction

            // When the window has finished loading create our google map below
            google.maps.event.addDomListener(window, 'load', init);

            function init() {
                // Basic options for a simple Google Map
                // For more options see: https://developers.google.com/maps/documentation/javascript/reference#MapOptions
                var mapOptions = {
                    // How zoomed in you want the map to start at (always required)
                    zoom: 8,

                    // The latitude and longitude to center the map (always required)
                    center: new google.maps.LatLng(21.6, -158.0), // Kahuku, Hawaii

                    // Disables the street view control and the map type (sattelite vs map) control
                    mapTypeControl:false,
                    streetViewControl: false,
                  //choose your style over here: https://mapstyle.withgoogle.com/
                      styles: [


  {
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#f5f5f5"
      }
    ]
  },
  {
    "elementType": "labels.icon",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#9e9e9e"
      }
    ]
  },
  {
    "elementType": "labels.text.stroke",
    "stylers": [
      {
        "color": "#f5f5f5"
      }
    ]
  },
  {
    "featureType": "administrative.land_parcel",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#bdbdbd"
      }
    ]
  },
  {
    "featureType": "poi",
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#eeeeee"
      }
    ]
  },
  {
    "featureType": "poi",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#757575"
      }
    ]
  },
  {
    "featureType": "poi.park",
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#e5e5e5"
      }
    ]
  },
  {
    "featureType": "poi.park",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#9e9e9e"
      }
    ]
  },
  {
    "featureType": "road",
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#ffffff"
      }
    ]
  },
  {
    "featureType": "road.arterial",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#757575"
      }
    ]
  },
  {
    "featureType": "road.highway",
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#dadada"
      }
    ]
  },
  {
    "featureType": "road.highway",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#616161"
      }
    ]
  },
  {
    "featureType": "road.local",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#9e9e9e"
      }
    ]
  },
  {
    "featureType": "transit.line",
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#e5e5e5"
      }
    ]
  },
  {
    "featureType": "transit.station",
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#eeeeee"
      }
    ]
  },
  {
    "featureType": "water",
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#c9c9c9"
      }
    ]
  },
  {
    "featureType": "water",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#9e9e9e"
      }
    ]
  }
]
                };

// Get the HTML DOM element that will contain your map 
// We are using a div with id="map" seen below in the <body>
var mapElement = document.getElementById('map');

// Create the Google Map using our element and options defined above
var map = new google.maps.Map(mapElement, mapOptions);


// variables that need to ce created for future use
var locationDataArray=[]; //initiates an array in which the locations coming from the server will be stored
var myIcon = "../static/blankSmTsp.png" //blank icon
var myTargetIcon = "../static/target.png" //target icon
idToUpdate=15; //just a dummy value that needs to be initiated
var locationMarkerArray=[]; //initiates an array in which the markers will be stored (created from locationDataArray array)

var newLocationMarkerTop = new google.maps.Marker({ //  dummy markers that will be changes on user input
              position: new google.maps.LatLng(0,0),
              map: map,
              });
locationMarkerArray.push(newLocationMarkerTop);
var newLocationMarkerBottom = new google.maps.Marker({ //  dummy markers that will be changes on user input
              position: new google.maps.LatLng(0,0),
              map: map,
              });
locationMarkerArray.push(newLocationMarkerBottom);




// functions that need to be created for future use
// creates a function that shows the markers only if the map is on the right zoom
function showHideMarkers () {
var zoom = map.getZoom();
for (var j = 0; j < locationMarkerArray.length; j++) { 
    if( zoom < locationMarkerArray[j]['minZoom'] || zoom > locationMarkerArray[j]['maxZoom']) {
      locationMarkerArray[j].setMap(null);
    }
    else {
      locationMarkerArray[j].setMap(map);     
    }
}
}
// creates a function that resets the dummy markers to a simple target icon with no text
function resetDummyMarkers () {
newLocationMarkerTop.setMap(null);
newLocationMarkerBottom.setMap(null);
newLocationMarkerTop.setIcon({url: myTargetIcon, labelOrigin: new google.maps.Point(16, 0)});
newLocationMarkerBottom.setIcon({url: myIcon, labelOrigin: new google.maps.Point(16, 20)});
newLocationMarkerTop.setLabel({text: " ",fontSize:'22px',fontFamily:'Roboto',fontWeight:'light', color: '#000000'});
newLocationMarkerBottom.setLabel({text: " ",fontSize:'18px',fontFamily:'Roboto',fontWeight:'light', color: '#000000'});
}
resetDummyMarkers();
// creates a function that hides the dummy markers 
function hideDummyMarkers () {
newLocationMarkerTop.setMap(null);
newLocationMarkerBottom.setMap(null);
}
// creates a function that hides all the markers 
function hideAllMarkers () {
  for (var j = 0; j < locationMarkerArray.length; j++) { 
      locationMarkerArray[j].setMap(null);
  }
}
// creates a function that hides all the markers 
function thankYou () {
                     $('#please').hide();
                     $('#editLabel').hide();
                     $('#addLabel').hide();
                     $('#thankYou').show();
                     $('#getCoordinates').html("");

}

// when the user clicks on the map, this designs the behavior (mostly drops the marker where the click happened)
google.maps.event.addListener(map, "click", function(event) {
                     $('#please').hide();
                   $('#thankYou').hide();
// shows the panel to add place names
    newLocationLat = event.latLng.lat();
    newLocationLng = event.latLng.lng();
    // centers the map on the place clicked
    map.panTo(new google.maps.LatLng(newLocationLat,newLocationLng));
    // populate the legend with lat, lng
    $('#getCoordinates').html("Lat=" + newLocationLat + "; Lng=" + newLocationLng);
    // drops a marker on the place clicked
    newLocationMarkerTop.setMap(map);
    newLocationMarkerBottom.setMap(map);
    newLocationMarkerTop.setPosition(new google.maps.LatLng(newLocationLat,newLocationLng));   
    newLocationMarkerBottom.setPosition(new google.maps.LatLng(newLocationLat,newLocationLng));   
    $('#editLabel').hide();      
    $('#addLabel').show();  

});




// event listeners - changes the properties of the page based on user input
// changes label text when user inputs value
 $('#locationName').on('input',function(e){
    newLocationMarkerTop.setIcon({url: myIcon, labelOrigin: new google.maps.Point(16, 0)});
    newLocationMarkerTop.setLabel({text: " "+$('#locationName').val(),fontSize:'20px',fontFamily:'Roboto',fontWeight:'light', color: '#000000'});
    })
  $('#locationExplained').on('input',function(e){
    newLocationMarkerBottom.setLabel({text: " "+$('#locationExplained').val(),fontSize:'16px',fontFamily:'Roboto',fontWeight:'light', color: '#000000'});
    })
// sets the map on the right zoom when another zoom level is selected for the marker
$('#type').add('#typeEdit').on('change', function() {
switch (this.value)
{
   case "country": map.setZoom(2);
       break;   
   case "state": map.setZoom(5);
       break;
   case "county":map.setZoom(8);
       break;
   case "city":map.setZoom(10);
       break;
   case "town/neighborhood": map.setZoom(12);
       break;
   case "place of interest": map.setZoom(14);
       break;
   case "street": map.setZoom(16);
       break;
   default: map.setZoom(8);
}
})



// launches the shoHideMarkers function when zoom changes
google.maps.event.addListener(map, 'zoom_changed', function() {
  showHideMarkers();
});
// changes the default zoom on the console when the zoom on the map changes
google.maps.event.addListener(map, 'zoom_changed', function() {
var zoom = map.getZoom();
if (zoom <=4) { $('#type').val("country");}
else if (zoom>=5 && zoom<=7) {$('#type').val("state");}
else if (zoom>=8 && zoom<=9) {$('#type').val("county");}
else if (zoom>=10 && zoom<=11) {$('#type').val("city");}
else if (zoom>=12 && zoom<=13) {$('#type').val("town/neighborhood");}
else if (zoom>=14 && zoom<=15) {$('#type').val("place of interest");}
else if (zoom>=16) {$('#type').val("street");}
});

  


// creates markers based on the server data
function createMarkers (index) {
  
  // finds the right formatting based on type
  var markerStyle = {};
  switch (locationDataArray[index]["type"])
  {
   case "country": markerStyle ={'minZoom':2,'maxZoom':4,'nameFont':'20px','explanationFont':'12px'};
       break;
   case "state": markerStyle ={'minZoom':5,'maxZoom':7,'nameFont':'20px','explanationFont':'12px'};
       break;
   case "county":markerStyle={'minZoom':8,'maxZoom':9,'nameFont':'18px','explanationFont':'10px'};
       break;
   case "city":markerStyle= {'minZoom':10,'maxZoom':11,'nameFont':'18px','explanationFont':'10px'};
       break;
   case "town/neighborhood": markerStyle = {'minZoom':12,'maxZoom':15,'nameFont':'18px','explanationFont':'10px'};
       break;
   case "place of interest": markerStyle = {'minZoom':14,'maxZoom':15,'nameFont':'16px','explanationFont':'10px'};
       break;
   case "street": markerStyle = {'minZoom':16,'maxZoom':20,'nameFont':'16px','explanationFont':'10px'};
       break;
   default: markerStyle= {'minZoom':13,'maxZoom':15,'nameFont':'16px','explanationFont':'10px'};
  }


  var locationName = new google.maps.Marker({
                position: new google.maps.LatLng(locationDataArray[index]["lat"], locationDataArray[index]["lng"]),
                map: map,
                label: { text: " "+locationDataArray[index]["locationName"],fontSize:markerStyle["nameFont"],fontFamily:'Roboto',fontWeight:'light', color: '#000000' },
                icon: {url: myIcon, labelOrigin: new google.maps.Point(16, 0)},
                minZoom:markerStyle["minZoom"],
                maxZoom:markerStyle["maxZoom"],
                markerIndex: locationDataArray[index]["id"]
                });


                google.maps.event.addListener(locationName, 'click', function () {    
                    console.log(this.markerIndex);
                    idToUpdate=this.markerIndex;
                   $('#please').hide();
                   $('#thankYou').hide();
                   $('#addLabel').hide();      
                   $('#editLabel').show();      
                   $('#locationNameEdit').val(locationDataArray[index]["locationName"]);      
                   $('#locationExplainedEdit').val(locationDataArray[index]["locationExplained"]);      
                   $('#typeEdit').val(locationDataArray[index]["type"]);      
                    // centers the map on the place clicked
                    map.panTo(new google.maps.LatLng(locationDataArray[index]["lat"], locationDataArray[index]["lng"]));
                    // hides the dummy markers 
                    $('#getCoordinates').html("Lat=" + locationDataArray[index]["lat"] + "; Lng=" + locationDataArray[index]["lng"]);
                    hideDummyMarkers();


 $('#locationNameEdit').on('input',function(e){
if (idToUpdate==locationDataArray[index]["id"]){
    locationName.setLabel({text: " "+$('#locationNameEdit').val(),fontSize:'22px',fontFamily:'Roboto',fontWeight:'light', color: '#000000'});
}
    })
  $('#locationExplainedEdit').on('input',function(e){
      if (idToUpdate==locationDataArray[index]["id"]){
    locationExplained.setLabel({text: " "+$('#locationExplainedEdit').val(),fontSize:'18px',fontFamily:'Roboto',fontWeight:'light', color: '#000000'});
  }
    })
  $('#typeEdit').on('change', function() {
      if (idToUpdate==locationDataArray[index]["id"]){
switch (this.value)
{
   case "country": markerStyle ={'minZoom':2,'maxZoom':4,'nameFont':'20px','explanationFont':'12px'};map.setZoom(2);
       break;
   case "state": markerStyle ={'minZoom':5,'maxZoom':7,'nameFont':'20px','explanationFont':'12px'};map.setZoom(5);
       break;
   case "county":markerStyle={'minZoom':8,'maxZoom':9,'nameFont':'18px','explanationFont':'10px'};map.setZoom(8);
       break;
   case "city":markerStyle= {'minZoom':10,'maxZoom':11,'nameFont':'18px','explanationFont':'10px'};map.setZoom(10);
       break;
   case "town/neighborhood": markerStyle = {'minZoom':12,'maxZoom':13,'nameFont':'18px','explanationFont':'10px'};map.setZoom(12);
       break;
   case "place of interest": markerStyle = {'minZoom':14,'maxZoom':15,'nameFont':'16px','explanationFont':'10px'};map.setZoom(14);
       break;
   case "street": markerStyle = {'minZoom':16,'maxZoom':17,'nameFont':'16px','explanationFont':'10px'};map.setZoom(16);
       break;
   default: markerStyle= {'minZoom':13,'maxZoom':15,'nameFont':'16px','explanationFont':'10px'};map.setZoom(8);
}
    locationName.minZoom=markerStyle["minZoom"];
    locationName.maxZoom=markerStyle["maxZoom"];
    locationExplained.minZoom=markerStyle["minZoom"];
    locationExplained.maxZoom=markerStyle["maxZoom"];
    showHideMarkers();
  }

})        

});
  locationMarkerArray.push(locationName);

  var locationExplained = new google.maps.Marker({
                position: new google.maps.LatLng(locationDataArray[index]["lat"], locationDataArray[index]["lng"]),
                map: map,
                label: { text: " "+locationDataArray[index]["locationExplained"],fontSize:markerStyle["explanationFont"],fontFamily:'Roboto',fontWeight:'light', color: '#000000' },
                icon: {url: myIcon, labelOrigin: new google.maps.Point(16, 20)},
                minZoom:markerStyle["minZoom"],
                maxZoom:markerStyle["maxZoom"],
                markerIndex: locationDataArray[index]["id"]
                });

                google.maps.event.addListener(locationExplained, 'click', function () {
                   idToUpdate=this.markerIndex;
                    console.log(this.markerIndex);                 
                   $('#please').hide();
                   $('#thankYou').hide();
                   $('#addLabel').hide();      
                   $('#editLabel').show(); 

                   $('#locationNameEdit').val(locationDataArray[index]["locationName"]);      
                   $('#locationExplainedEdit').val(locationDataArray[index]["locationExplained"]);      
                   $('#typeEdit').val(locationDataArray[index]["type"]);   


                    // centers the map on the place clicked
                    map.panTo(new google.maps.LatLng(locationDataArray[index]["lat"], locationDataArray[index]["lng"]));
                    // hides the dummy markers 
                        $('#getCoordinates').html("Lat=" + locationDataArray[index]["lat"] + "; Lng=" + locationDataArray[index]["lng"]);
                    hideDummyMarkers();


    if (idToUpdate==this.markerIndex) {              

 $('#locationNameEdit').on('input',function(e){
  if (idToUpdate==locationDataArray[index]["id"]){
    locationName.setLabel({text: " "+$('#locationNameEdit').val(),fontSize:'22px',fontFamily:'Roboto',fontWeight:'light', color: '#000000'});
  }
    })
  $('#locationExplainedEdit').on('input',function(e){
    if (idToUpdate==locationDataArray[index]["id"]){
    locationExplained.setLabel({text: " "+$('#locationExplainedEdit').val(),fontSize:'18px',fontFamily:'Roboto',fontWeight:'light', color: '#000000'});
  }
    })
  $('#typeEdit').on('change', function() {
      if (idToUpdate==locationDataArray[index]["id"]){
switch (this.value)
{
   case "country": markerStyle ={'minZoom':2,'maxZoom':4,'nameFont':'20px','explanationFont':'12px'};map.setZoom(2);
       break;
   case "state": markerStyle ={'minZoom':5,'maxZoom':7,'nameFont':'20px','explanationFont':'12px'};map.setZoom(5);
       break;
   case "county":markerStyle={'minZoom':8,'maxZoom':9,'nameFont':'18px','explanationFont':'10px'};map.setZoom(8);
       break;
   case "city":markerStyle= {'minZoom':10,'maxZoom':11,'nameFont':'18px','explanationFont':'10px'};map.setZoom(10);
       break;
   case "town/neighborhood": markerStyle = {'minZoom':12,'maxZoom':13,'nameFont':'18px','explanationFont':'10px'};map.setZoom(12);
       break;
   case "place of interest": markerStyle = {'minZoom':14,'maxZoom':15,'nameFont':'16px','explanationFont':'10px'};map.setZoom(14);
       break;
   case "street": markerStyle = {'minZoom':16,'maxZoom':17,'nameFont':'16px','explanationFont':'10px'};map.setZoom(16);
       break;
   default: markerStyle= {'minZoom':13,'maxZoom':15,'nameFont':'16px','explanationFont':'10px'};map.setZoom(8);
}
    locationName.minZoom=markerStyle["minZoom"];
    locationName.maxZoom=markerStyle["maxZoom"];
    locationExplained.minZoom=markerStyle["minZoom"];
    locationExplained.maxZoom=markerStyle["maxZoom"];
    showHideMarkers();
  }

})           
    }// ends if statement
     });
  locationMarkerArray.push(locationExplained);

};

//AJAX function that gets the locations from the server using Jquery
//as a callback, launches the createMarkers function which creates markers based on the server data
var count = 0;
var get_locations = function() {
var myURL=$SCRIPT_ROOT + '/json';
var dict={};
      $.ajax({
        type: "POST",
        url: myURL,
        data: dict,

      success: function(data) {
      locationDataArray = data;
      console.log('locationDataArray:'+locationDataArray);
      console.log(locationDataArray);
      console.log('locationMarkerArray before reset creation:'+locationMarkerArray);
      console.log(locationMarkerArray);
            count++;
        //checks that we do have some values
      if (locationDataArray.length<1  &&  count<=3) {get_locations();}
        //creates the markers
      hideAllMarkers ();
      locationMarkerArray=[];
      for (var i = 0; i < locationDataArray.length; i++) {createMarkers (i);}
      showHideMarkers(); 
      console.log('locationMarkerArray after reset creation:'+locationMarkerArray);
      console.log(locationMarkerArray);
      },

  error: function(XMLHttpRequest, textStatus, errorThrown) {
     location.reload();}
});
}
get_locations();

// creates the addLocation function which takes the values and adds them to the map
var addLocation = function() {
var dict = {};
var URL=$SCRIPT_ROOT + '/jsonNewLocation';
dict['lat']=newLocationLat;
dict['lng']=newLocationLng;
dict['locationName']=$('#locationName').val();
dict['locationExplained']=$('#locationExplained').val();
dict['type']=$('#type').val();
  $.getJSON(
    URL,
    dict,
  function(data) {
          get_locations(); //reloads all the markers - should include the new one
          resetDummyMarkers(); //removes the temporary markers from the map
          thankYou ();//opens the thank you div
                })
  }
//launches the addLocation() function when you click on the addLocation button
$('#addLocation').click(function(){
  addLocation();
});

//defines a removeLocation function that distroys records from the server
var removeLocation = function() {
var URL=$SCRIPT_ROOT + '/jsonRemoveOneLocation';
var dict = {};
dict["id"]=idToUpdate;
$.getJSON(
    URL,
    dict,
  function(data) {
         hideAllMarkers (); //hides all the markers to start from a clean slate
         get_locations();
         thankYou ();
                })
  }
//launches the removeLocation() function when you click on the removeLocation button
$('#removeLocation').click(function(){
  removeLocation();
});


//defines a editLocation function that distroys records from the server
var editLocation = function() {
var URL=$SCRIPT_ROOT + '/jsonEditLocation';
var dict = {};
dict["id"]=idToUpdate;
dict['locationName']=$('#locationNameEdit').val();
dict['locationExplained']=$('#locationExplainedEdit').val();
dict['type']=$('#typeEdit').val();
  $.getJSON(
    URL,
    dict,
  function(data) {
        hideAllMarkers ();
         get_locations();
         thankYou ();
                })
  }
//launches the editLocation() function when you click on the editLocation button
$('#editLocation').click(function(){
  editLocation();
});


            }// end of the init function
});// end of the jQuery function




        </script>
    </head>
    <body>
        <!-- The element that will contain our Google Map. This is used in both the Javascript and CSS above. -->
        <div id="map"></div>

<!-- Menu. -->
<nav class="navbar navbar-default navbar-fixed-top">

    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/"><img id="logo" alt="" src="../static/icon.png"></a>
    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li ><a href="/">Map </a></li>
        <li ><a href="/analysis">Analysis </a></li>
        <li class="current-nav"><a href="/editMap">Edit</a></li>
        <li  ><a href="/about">About</a></li><!--
        <li ><a href="/donate">donate</a></li>-->
      </ul>
</div>
</nav>





<div class="container-fluid">
<small id="getCoordinates" class="form-text text-muted"></small>

<div id="please">
  <div class="container-fluid buffer"></div>
  <div class="panel panel-success">
    <div class="panel-heading">
      <h3 class="panel-title">Click on the map to edit it</h3>
    </div>
    <div class="panel-body">
      <p>Click anywhere on the map to add/modify a place/definition!<br/>Only places and definitions added by users will appear on the map tab.<br/>Please use no more than 50 characters.<br/>Zoom in for further detail.</p>
    </div>
  </div>

</div>


<div id="thankYou" style="display:none">
  <div class="container-fluid buffer"></div>
  <div class="panel panel-success">
    <div class="panel-heading">
      <h3 class="panel-title">Thank you!</h3>
    </div>
    <div class="panel-body">
      <p>Changes saved. You can click on the map to add or edit more locations.<br/>Only places and definitions added by users will appear on the map tab.<br/>Please use no more than 50 characters.<br/>Zoom in for further detail.</p>
    </div>
  </div>


</div>

        <!-- elements needed to add a label. -->
<div id="addLabel" style="display:none">
<div class="container-fluid">
<div class="col-sm-4">
<label for="locationName" >Name</label><input type="text" class="form-control " name="locationName" id="locationName">
</div>
<div class="col-sm-4">
<label for="locationExplained" >Meaning</label><input type="text" class="form-control " name="locationExplained" id="locationExplained">
</div>
<div class="col-sm-4">
<label for="type" >Zoom level</label><select type="text" class="form-control " name="type" id="type"> 
      <option>county</option>
      <option>country</option>
      <option>state </option>
      <option>city</option>
      <option>town/neighborhood</option>
      <option>place of interest</option>
      <option>street</option>
</select>
</div>
</div>
<div class="container-fluid buffer"></div>
<div class="container-fluid">
<div class="col-sm-4">
    <button type="button" id="addLocation" class="btn btn-success">Add Location</button>
</div>
</div>
<div class="container-fluid buffer"></div>
</div>
        <!-- end elements needed to add a label. -->
        <!-- elements needed to edit a label. -->

<div id="editLabel" style="display:none">
<div class="container-fluid">
<div class="col-sm-4">
<label for="locationNameEdit" >Name</label><input type="text" class="form-control " name="locationNameEdit" id="locationNameEdit">
</div>
<div class="col-sm-4">
<label for="locationExplainedEdit" >Meaning</label><input type="text" class="form-control " name="locationExplainedEdit" id="locationExplainedEdit">
</div>
<div class="col-sm-4">
<label for="typeEdit" >Zoom level</label><select type="text" class="form-control " name="type" id="typeEdit"> 
      <option>county</option>
      <option>country</option>
      <option>state </option>
      <option>city</option>
      <option>town/neighborhood</option>
      <option>place of interest</option>
      <option>street</option>
</select>
</div>
</div>
<div class="container-fluid buffer"></div>
<div class="container-fluid">
<div class="col-sm-4">
    <button type="button" id="removeLocation" class="btn btn-success">Remove Location</button>
</div>
<div class="col-sm-4">
    <button type="button" id="editLocation" class="btn btn-success">Save Changes</button>
</div>
</div>
<div class="container-fluid buffer"></div>
</div>



</body>




    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="../static/js/bootstrap.min.js"></script>

</html>
